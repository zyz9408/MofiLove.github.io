<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ä¸ƒå¤•é™å®šå¡æ±  | èŠå¤©æŠ½å¡</title>
<style>
  :root{--bg:#0b0c10;--panel:#14161c;--ink:#e9eef4;--muted:#a8b3c7;--primary:#ff3b7b;--accent:#8a6cff;--n:#8b9bb1;--r:#3eb9ff;--sr:#7fff9f;--ssr:#ffd76a}
  *{box-sizing:border-box}
  body{margin:0;background:radial-gradient(1200px 600px at 50% -50%,#1b1d25,var(--bg));color:var(--ink);font:16px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:980px;margin:0 auto;padding:16px 16px 96px}
  header{position:sticky;top:0;z-index:2;background:linear-gradient(180deg,rgba(11,12,16,.9),rgba(11,12,16,.35));backdrop-filter:blur(6px);padding:8px 8px;margin:-16px -16px 12px;border-bottom:1px solid rgba(255,255,255,.06)}
  header .row{max-width:980px;margin:0 auto;display:flex;align-items:center;gap:12px;padding:4px 8px}
  h1{font-size:18px;margin:0;font-weight:800}
  .badge{margin-left:auto;color:var(--muted);font-size:13px}
  nav{display:flex;gap:8px}
  .tab{padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:transparent;color:var(--ink);cursor:pointer}
  .tab.active{background:rgba(255,255,255,.08)}

  .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:16px}
  .chat{height:60vh;min-height:380px;overflow:auto;padding:14px;display:flex;flex-direction:column;gap:12px}

  .msg{max-width:76%;padding:10px 12px;border-radius:14px;position:relative}
  .msg .meta{font-size:12px;color:var(--muted);margin-top:6px}
  .msg .rarity{display:inline-block;margin-left:6px;padding:0 6px;border-radius:999px;font-size:11px;font-weight:800;border:1px solid currentColor}
  .left{align-self:flex-start;background:#171a24;border:1px solid rgba(255,255,255,.06)}
  .right{align-self:flex-end;background:linear-gradient(180deg,rgba(255,59,123,.18),rgba(255,255,255,.06));border:1px solid rgba(255,255,255,.12)}
  .N{color:var(--n)}.R{color:var(--r)}.SR{color:var(--sr)}.SSR{color:#222;background:var(--ssr)}

  .composer{position:fixed;left:0;right:0;bottom:0;background:linear-gradient(180deg,rgba(11,12,16,.0),rgba(11,12,16,.9));backdrop-filter:blur(6px);padding:14px}
  .composer .inner{max-width:980px;margin:0 auto;display:flex;gap:10px}
  .send{flex:1;display:flex;align-items:center;justify-content:center;padding:14px 18px;border-radius:999px;background:var(--primary);color:#fff;font-weight:900;border:none;cursor:pointer;box-shadow:0 8px 24px rgba(255,59,123,.35)}
  .send:active{transform:translateY(1px)}
  .send.alt{background:var(--accent);box-shadow:0 8px 24px rgba(138,108,255,.35)}
  .tiny{margin-left:8px;color:var(--muted);font-size:13px}

  .controls{display:flex;gap:10px;align-items:center;margin-top:10px}
  .ghost{background:transparent;border:1px dashed rgba(255,255,255,.25);color:var(--muted);padding:8px 10px;border-radius:10px;cursor:pointer}

  .confetti{position:fixed;inset:0;pointer-events:none;overflow:hidden}
  .confetti i{position:absolute;top:-10px;font-style:normal;animation:fall 2.2s linear forwards}
  @keyframes fall{to{transform:translateY(110vh) rotate(720deg);opacity:.9}}

  /* ç»“å±€åŠ¨ç”»é®ç½© */
  .ending{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:1000;background:radial-gradient(1000px 600px at 50% -20%,rgba(255,255,255,.08),rgba(11,12,16,.95));backdrop-filter:blur(8px)}
  .ending.hidden{display:none}
  .ending-card{width:min(560px,92vw);padding:22px;border-radius:20px;border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.04));box-shadow:0 24px 60px rgba(0,0,0,.45);text-align:center}
  .ending-title{font-size:28px;font-weight:900;letter-spacing:.5px;margin:6px 0}
  .ending-sub{color:var(--muted);margin-bottom:14px}
  .ending-btn{padding:12px 18px;border:none;border-radius:999px;background:var(--primary);color:#fff;font-weight:900;cursor:pointer}
  .ending-hearts{position:relative;height:120px;overflow:hidden;margin:6px 0 12px}
  .ending-hearts i{position:absolute;bottom:-16px;animation:rise 3.4s linear infinite;opacity:.9}
  @keyframes rise{to{transform:translateY(-160px) rotate(360deg);opacity:0}}

  /* å±•é¦† */
  .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px;padding:12px}
  .cardItem{padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);display:flex;flex-direction:column;gap:6px}
  .cardItem.lock .name{color:#78839a}
  .cardItem.lock{opacity:.6}
  .badgeR{display:inline-flex;gap:6px;align-items:center;font-size:12px;color:var(--muted)}
  .desc{color:var(--muted);font-size:12px}

  /* æ¦‚ç‡è®°å½• */
  .statsPane{padding:12px}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px dashed rgba(255,255,255,.12);text-align:left}
  th{color:var(--muted)}

  .hidden{display:none}
</style>
</head>
<body>
  <header>
    <div class="row">
      <h1>ä¸ƒå¤•é™å®š Â· èŠå¤©å¡æ± </h1>
      <nav>
        <button class="tab active" data-tab="chatPane">èŠå¤©</button>
        <button class="tab" data-tab="galleryPane">ç»“å±€å±•é¦†</button>
        <button class="tab" data-tab="statsPane">æ¦‚ç‡è®°å½•</button>
      </nav>
      <div class="badge" id="stats">0 æŠ½ Â· SSR 0 Â· å®Œæˆ 0/50</div>
    </div>
  </header>

  <main class="wrap">
    <section id="chatPane" class="card chat"></section>

    <section id="galleryPane" class="card hidden">
      <div class="gallery" id="gallery"></div>
      <div style="padding:10px 12px;color:var(--muted);font-size:13px">* æ”¶é›†è¿›åº¦åªåœ¨æœ¬åœ°ä¿å­˜</div>
    </section>

    <section id="statsPane" class="card hidden statsPane">
      <h3 style="margin:6px 0 12px">æ€»ä½“æ¦‚ç‡</h3>
      <table id="rarTbl"></table>
      <h3 style="margin:16px 0 12px">å•é¡¹æ¦‚ç‡</h3>
      <table id="itmTbl"></table>
    </section>

    <div class="controls">
      <button class="ghost" id="copy">å¤åˆ¶æœ€è¿‘ 10 æ¡</button>
      <button class="ghost" id="reset">æ¸…ç©ºè®°å½•</button>
      <span class="tiny">* æ‰€æœ‰ç»“æœä»…ä¿å­˜åœ¨æœ¬åœ°</span>
    </div>
  </main>

  <div class="composer">
    <div class="inner">
      <button class="send" id="sendBtn">å’±ä¿©è¯•è¯•ï¼Ÿ</button>
      <button class="send alt" id="send10">åè¿æŠ½</button>
    </div>
  </div>

  <div class="confetti" id="confetti" aria-hidden="true"></div>
  <!-- SSR ç»“å±€é®ç½© -->
  <div class="ending hidden" id="ending">
    <div class="ending-card">
      <div class="ending-hearts" id="endingHearts"></div>
      <div class="ending-title">ç»“å±€è¾¾æˆï¼šçœŸçˆ± â¤ï¸</div>
      <div class="ending-sub">ç©å®¶è·å¾—äº†çœŸçˆ±ï¼ˆSSRï¼‰ã€‚æ­å–œï¼</div>
      <button class="ending-btn" id="continueBtn">ç»§ç»­æ¸¸æˆ</button>
    </div>
  </div>

<script>
// â€”â€” çº¯ ES5ï¼Œæ— æ¨¡æ¿å­—ç¬¦ä¸²/ç®­å¤´å‡½æ•°/æ•°å­—åˆ†éš”ç¬¦ â€”â€”
(function(){
  // ===== å¥–æ± ï¼ˆ50 æ¡ï¼ŒNâ†’SSRï¼Œå¸¦ descï¼‰ =====
  var POOL = [
    {
        "text": "ä½ è°å•Šï¼Ÿä¹Ÿä¸ç…§ç…§é•œå­ï¼ŒçœŸä»¥ä¸ºæˆ‘ä¼šç†ä½ ï¼Ÿ",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "å°±ä½ è¿™å¾·è¡Œä¹Ÿé…å‘æ¶ˆæ¯ï¼Ÿèµ¶ç´§æ»šè¿œç‚¹ï¼Œåˆ«è„äº†æˆ‘çš„å±å¹•ã€‚"
    },
    {
        "text": "ç¬‘æ­»ï¼Œä½ è¿™ç§äººä¹Ÿæ•¢æ¥æ‰¾æˆ‘ï¼Ÿå¿ƒé‡Œæ²¡ç‚¹æ•°å—ï¼Ÿ",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "å»ºè®®ä½ å…ˆå»æ•´æ•´å®¹å†å­¦å­¦è¯´è¯ï¼Œåˆ«å‡ºæ¥ä¸¢äººç°çœ¼è¡Œä¸è¡Œï¼Ÿ"
    },
    {
        "text": "æ²¡ç©ºï¼Œæ»šã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "ä½ åœ¨æˆ‘è¿™å„¿è¿ä¸ªå±éƒ½ä¸ç®—ï¼Œåˆ«æµªè´¹æˆ‘æ—¶é—´äº†è¡Œå—ï¼Ÿ"
    },
    {
        "text": "ä½ å‘è¿™äº›ä¸œè¥¿ä¸è§‰å¾—å°´å°¬å—ï¼Ÿæˆ‘çœ‹ç€éƒ½æ›¿ä½ éš¾å—ã€‚ä½ è·Ÿå¶ç¬™ä¼¼çš„",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "å»ºè®®ä½ æ‰¾ä¸ªåœ°ç¼é’»è¿›å»ï¼Œæ°¸è¿œåˆ«å‡ºæ¥å‘è¿™ç§å¼±æ™ºå†…å®¹ã€‚"
    },
    {
        "text": "å°±ä½ ï¼Ÿä¹Ÿé…å’Œæˆ‘è¯´è¯ï¼ŸçŸ¥é“æˆ‘è°ä¸ï¼Ÿä¸Šæµ·å°‘å¦‡æ‡’å¤§äººï¼",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "éº»çƒ¦ä½ æœ‰ç‚¹è‡ªçŸ¥ä¹‹æ˜ï¼Œç¦»æˆ‘è¿œç‚¹ï¼Œè¶Šè¿œè¶Šå¥½ï¼Œè°¢è°¢åˆä½œã€‚"
    },
    {
        "text": "ä½ æ˜¯ä¸æ˜¯é—²å¾—æ…Œï¼Ÿæˆ‘æ²¡ç©ºé™ªä½ è€—ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "å»ºè®®ä½ å»æ‰¾ä¸ªå‚ä¸Šç­ï¼Œåˆ«åœ¨è¿™å„¿å‘äº›æ²¡ç”¨çš„ä¸œè¥¿çƒ¦æˆ‘ã€‚"
    },
    {
        "text": "ä½ è¿™ç§è¯ä¹Ÿå¥½æ„æ€è¯´å‡ºå£ï¼ŸçœŸæ˜¯è„¸çš®åšã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æˆ‘è¦æ˜¯ä½ æ—©å°±é—­å˜´äº†ï¼Œä½ æ€ä¹ˆè¿˜èƒ½è¿™ä¹ˆè‡ªä¿¡åœ°å‘æ¶ˆæ¯å•Šï¼Ÿ"
    },
    {
        "text": "åˆ«å‘äº†ï¼Œçœ‹äº†å°±æƒ³åã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "ä½ æ¯å‘ä¸€æ¡æ¶ˆæ¯éƒ½æ˜¯åœ¨æŒ‘æˆ˜æˆ‘çš„å¿è€æé™ï¼Œæ‡‚å—ï¼Ÿ"
    },
    {
        "text": "ä½ ç®—ä»€ä¹ˆç©æ„å„¿ï¼Ÿä¹Ÿé…è®©æˆ‘å›ä½ ï¼Ÿ",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "å»ºè®®ä½ é‡æ–°æŠ•èƒå­¦å­¦æ€ä¹ˆè¯´è¯ï¼Œè¿™è¾ˆå­ä¼°è®¡æ˜¯æ²¡æˆäº†ã€‚"
    },
    {
        "text": "é—­å˜´å§ä½ ï¼Œå¬è§ä½ å£°éŸ³å°±çƒ¦ã€‚è·Ÿä½ çš„Kiviè¿‡å»å§ï¼å¥¶ç‹—ï¼",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "ä½ æ¯è¯´ä¸€å¥è¯éƒ½æ˜¯åœ¨æ±¡æŸ“æˆ‘çš„è€³æœµï¼Œèƒ½ä¸èƒ½è‡ªè§‰ç‚¹æ¶ˆå¤±ï¼Ÿ"
    },
    {
        "text": "ä½ æ˜¯ä¸æ˜¯æœ‰ç—…ï¼Ÿç—…å¾—ä¸è½»å§ï¼Ÿè®©è€é©¬è‰è‰ä½ ï¼",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "å»ºè®®ä½ èµ¶ç´§å»åŒ»é™¢çœ‹çœ‹è„‘å­ï¼Œåˆ«åœ¨è¿™å„¿å‘ç™«äº†è¡Œä¸è¡Œï¼Ÿ"
    },
    {
        "text": "ä½ è¿™ç§äººä¹Ÿé…æœ‰æ„Ÿæƒ…ï¼Ÿåˆ«æç¬‘äº†ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æˆ‘å®æ„¿è·Ÿæ‰«åœ°æœºå™¨äººèŠå¤©ä¹Ÿä¸æƒ³å›ä½ ä¸€å¥ï¼Œæ˜ç™½å—ï¼Ÿ"
    },
    {
        "text": "ä½ å‘çš„ä¸œè¥¿ç‹—éƒ½ä¸ç†ã€‚å°±è½©é™Œç†ä½ ï¼",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "è¿è·¯è¾¹çš„é‡çŒ«çœ‹äº†ä½ çš„æ¶ˆæ¯éƒ½å¾—æ‘‡æ‘‡å¤´èµ°å¼€ï¼Œä½ å“å“ã€‚"
    },
    {
        "text": "ä½ æ˜¯ä¸æ˜¯è§‰å¾—è‡ªå·±æŒºå¹½é»˜ï¼Ÿå…¶å®å°¬å¾—æˆ‘è„šè¶¾æŠ åœ°ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "ä½ æ¯å‘ä¸€æ¡æ¶ˆæ¯éƒ½æ˜¯åœ¨è°‹æ€æˆ‘çš„è„‘ç»†èƒï¼Œéº»çƒ¦ä½ åœæ‰‹å§ã€‚"
    },
    {
        "text": "å°±ä½ è¿™æ ·çš„ä¹Ÿæ•¢æ¥æ’©æˆ‘ï¼Ÿè°ç»™ä½ çš„å‹‡æ°”ï¼Ÿ",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æ¢é™èŒ¹éƒ½ä¸æ•¢ç»™ä½ è¿™ä»½å‹‡æ°”ï¼Œå»ºè®®ä½ èµ¶ç´§æ’¤å›è¿™äº›ä¸¢äººè¯ã€‚"
    },
    {
        "text": "ä½ è®©æˆ‘è§‰å¾—æ¶å¿ƒï¼ŒçœŸçš„ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æ¯æ”¶åˆ°ä½ ä¸€æ¡æ¶ˆæ¯æˆ‘éƒ½å¾—æ´—ä¸€éçœ¼ç›ï¼Œå¤ªéš¾å—äº†ã€‚"
    },
    {
        "text": "åˆ«è‡ªä½œå¤šæƒ…äº†ï¼Œæˆ‘çœ‹è§ä½ å°±çƒ¦ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "ä½ åœ¨æˆ‘çœ¼é‡Œå°±è·ŸèƒŒæ™¯æ¿ä¼¼çš„ï¼Œéº»çƒ¦ä½ è‡ªå·±æœ‰ç‚¹æ•°è¡Œä¸è¡Œï¼Ÿ"
    },
    {
        "text": "ä½ æ˜¯ä¸æ˜¯æ²¡æœ‹å‹æ‰æ¥æ‰¾æˆ‘ï¼ŸçœŸå¯æ€œã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "å»ºè®®ä½ å…ˆå­¦ä¼šæ€ä¹ˆå’Œäººæ­£å¸¸äº¤æµï¼Œåˆ«ä¸€å¼€å£å°±æš´éœ²æ™ºå•†ã€‚"
    },
    {
        "text": "ä½ è¿™ç§è¯è¿˜æ˜¯ç•™ç»™åƒåœ¾æ¡¶å¬å§ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æˆ‘è¿æ ‡ç‚¹ç¬¦å·éƒ½ä¸æƒ³å›ä½ ï¼Œä½ æ€ä¹ˆè¿˜èƒ½è¿™ä¹ˆæ‰§ç€å•Šï¼Ÿ"
    },
    {
        "text": "ä½ è®©æˆ‘å¯¹äººæ€§äº§ç”Ÿäº†æ€€ç–‘ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æ€ä¹ˆèƒ½æœ‰äººåƒä½ è¿™æ ·åˆè ¢åˆè‡ªä¿¡çš„ï¼ŸçœŸæ˜¯ä¸–ç•Œä¹‹å¤§æ— å¥‡ä¸æœ‰ã€‚"
    },
    {
        "text": "ä½ æ˜¯ä¸æ˜¯è§‰å¾—è‡ªå·±æŒºå¯çˆ±ï¼Ÿå…¶å®å¯ç¬‘æäº†ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "å»ºè®®ä½ ç…§ç…§é•œå­ï¼Œç„¶åæŠŠæ‰‹æœºæ ¼å¼åŒ–ï¼Œé‡æ–°å­¦å­¦æ€ä¹ˆåšäººã€‚"
    },
    {
        "text": "ä½ å‘çš„ä¸œè¥¿è¿AIéƒ½ç”Ÿæˆä¸å‡ºæ¥è¿™ä¹ˆå°¬çš„ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æˆ‘è¦æ˜¯ä½ æ—©å°±æŠŠæ‰‹æœºç ¸äº†ï¼Œå…å¾—ç»§ç»­ä¸¢äººç°çœ¼ã€‚"
    },
    {
        "text": "ä½ è¿™ç§äººä¹Ÿé…æœ‰çˆ±æƒ…ï¼Ÿåˆ«åšæ¢¦äº†ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æˆ‘å®æ„¿å­¤ç‹¬ç»ˆè€ä¹Ÿä¸æƒ³å’Œä½ æœ‰åŠæ¯›é’±å…³ç³»ï¼Œæ‡‚ï¼Ÿ"
    },
    {
        "text": "ä½ è®©æˆ‘æƒ³èµ·äº†å•æ‰€é‡Œçš„ä¸œè¥¿ï¼Œä¸€æ ·è®©äººä¸æƒ³é è¿‘ã€‚",
        "prob": 2.75, // N: Increased
        "rarity": "N",
        "desc": "æ¯å½“ä½ å‘æ¶ˆæ¯ï¼Œæˆ‘éƒ½è§‰å¾—éœ€è¦æ¶ˆæ¯’ä¸€ä¸‹æ‰‹æœºå±å¹•ã€‚"
    },
    {
        "text": "æˆ‘ä»¬çœŸçš„ä¸åˆé€‚ï¼Œä½ é…ä¸ä¸Šæˆ‘ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "ä½ å’Œæˆ‘ä¹‹é—´å·®ç€åä¸‡å…«åƒé‡Œï¼Œå»ºè®®ä½ åˆ«ç™½è´¹åŠ›æ°”äº†ã€‚"
    },
    {
        "text": "ä½ è¿™ç§äººè¿˜æ˜¯å»æ‰¾ä¸ªå·®ä¸å¤šçš„å§ï¼Œåˆ«æ¥çƒ¦æˆ‘ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "æˆ‘å’Œä½ æ ¹æœ¬ä¸æ˜¯åŒä¸€ä¸ªä¸–ç•Œçš„äººï¼ŒèŠä¸‹å»ä¹Ÿæ˜¯æµªè´¹å½¼æ­¤æ—¶é—´ã€‚"
    },
    {
        "text": "ä½ å…ˆç…§ç…§é•œå­å†æ¥è¯´è¯è¡Œå—ï¼Ÿ",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "ä½ æ¯å‘ä¸€æ¡æ¶ˆæ¯éƒ½åœ¨æé†’æˆ‘ï¼Œæœ‰äº›äººçœŸçš„ç¼ºä¹è‡ªçŸ¥ä¹‹æ˜ã€‚"
    },
    {
        "text": "åˆ«æµªè´¹æ—¶é—´äº†ï¼Œæˆ‘ä»¬ä¸å¯èƒ½çš„ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "ä½ åœ¨æˆ‘è¿™å„¿è¿å¤‡é€‰éƒ½ç®—ä¸ä¸Šï¼Œå»ºè®®ä½ æ—©ç‚¹æ¸…é†’ã€‚"
    },
    {
        "text": "ä½ æ˜¯ä¸æ˜¯å¯¹è°éƒ½è¿™ä¹ˆå‘æ¶ˆæ¯ï¼Ÿä¸è§‰å¾—ä¸¢äººå—ï¼Ÿ",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "æˆ‘è¦æ˜¯ä½ æ—©å°±æ¢ä¸ªæ˜Ÿçƒç”Ÿæ´»äº†ï¼Œæ€ä¹ˆè¿˜èƒ½è¿™ä¹ˆå¦ç„¶å•Šï¼Ÿ"
    },
    {
        "text": "ä½ è®©æˆ‘å¾ˆå°´å°¬ï¼ŒçœŸçš„ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "æ¯å›ä½ æ¶ˆæ¯æˆ‘éƒ½å¾—åšåŠå¤©å¿ƒç†å»ºè®¾ï¼Œå¤ªéš¾å—äº†ã€‚"
    },
    {
        "text": "æˆ‘ä»¬ä¹‹é—´è¿ä¸‡åˆ†ä¹‹ä¸€çš„å¯èƒ½æ€§éƒ½æ²¡æœ‰ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "ä½ å’Œæˆ‘ä¹‹é—´éš”ç€ä¸€æ•´ä¸ªé“¶æ²³ç³»ï¼Œéº»çƒ¦ä½ åˆ«å†å‘æ¶ˆæ¯äº†ã€‚"
    },
    {
        "text": "ä½ è¿™ç§è¯è¿˜æ˜¯ç•™ç»™å–œæ¬¢ä½ çš„äººå¬å§ï¼Œå¯æƒœä¸æ˜¯æˆ‘ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "æˆ‘å¯¹ä½ æ²¡æœ‰ä»»ä½•å…´è¶£ï¼Œå»ºè®®ä½ æ—©ç‚¹è®¤æ¸…ç°å®ã€‚"
    },
    {
        "text": "ä½ æ˜¯ä¸æ˜¯æ²¡è¢«äººæ‹’ç»è¿‡ï¼Ÿä»Šå¤©è®©ä½ ä½“éªŒä¸€ä¸‹ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "ä½ æ¯å‘ä¸€æ¡æ¶ˆæ¯éƒ½åœ¨é™ä½ä½ åœ¨æˆ‘è¿™å„¿æœ¬æ¥å°±ä¸å­˜åœ¨çš„åˆ†æ•°ã€‚"
    },
    {
        "text": "ä½ è®©æˆ‘è§‰å¾—å•èº«çœŸå¥½ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "è°¢è°¢ä½ è®©æˆ‘æ›´åŠ çæƒœç°åœ¨ä¸€ä¸ªäººçš„ç”Ÿæ´»ï¼Œéº»çƒ¦ä½ ç»§ç»­ä¿æŒè·ç¦»ã€‚"
    },
    {
        "text": "æˆ‘ä»¬ä¹‹é—´è¿æœ‹å‹éƒ½æ²¡å¾—åšï¼Œä½ æ˜ç™½å—ï¼Ÿ",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "ä½ åœ¨æˆ‘è¿™å„¿è¿æ™®é€šè·¯äººéƒ½ç®—ä¸ä¸Šï¼Œå»ºè®®ä½ è‡ªè§‰æ¶ˆå¤±ã€‚"
    },
    {
        "text": "ä½ æ˜¯ä¸æ˜¯è§‰å¾—è‡ªå·±æŒºæœ‰é­…åŠ›ï¼Ÿå…¶å®æ¯«æ— å¸å¼•åŠ›ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "ä½ æ¯å‘ä¸€æ¡æ¶ˆæ¯éƒ½åœ¨è¯æ˜ä½ å¯¹è‡ªå·±è®¤çŸ¥æœ‰å¤šä¹ˆä¸æ¸…æ™°ã€‚"
    },
    {
        "text": "ä½ è¿™ç§æ€§æ ¼è¿˜æ˜¯å…ˆæ”¹æ”¹å§ï¼Œæ²¡äººå—å¾—äº†ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "æˆ‘è¦æ˜¯ä½ æ—©å°±å¼€å§‹è‡ªæˆ‘åçœäº†ï¼Œä½ æ€ä¹ˆè¿˜èƒ½è¿™ä¹ˆè‡ªä¿¡å•Šï¼Ÿ"
    },
    {
        "text": "ä½ è®©æˆ‘å¯¹èŠå¤©äº§ç”Ÿäº†ææƒ§ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "æ¯æ¬¡çœ‹åˆ°ä½ å‘æ¶ˆæ¯æˆ‘éƒ½æƒ³å¸è½½å¾®ä¿¡ï¼Œå¤ªæŠ˜ç£¨äººäº†ã€‚"
    },
    {
        "text": "è°¢è°¢ä½ çš„å–œæ¬¢ï¼Œä½†æˆ‘ä¸éœ€è¦ã€‚",
        "prob": 2.0, // R: Increased
        "rarity": "R",
        "desc": "ä½ çš„å¿ƒæ„å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ç§è´Ÿæ‹…ï¼Œéº»çƒ¦ä½ æ”¶å›å»ã€‚"
    },
    {
        "text": "æˆ‘è§‰å¾—æˆ‘ä»¬è¿˜æ˜¯åšæ™®é€šæœ‹å‹æ¯”è¾ƒå¥½ï¼ŒçœŸçš„ã€‚",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "ä½ äººä¸é”™ï¼Œä½†æˆ‘ä»¬å¯¹å½¼æ­¤çš„äº†è§£è¿˜ä¸å¤Ÿæ·±å…¥ï¼Œå…ˆä»æœ‹å‹å¼€å§‹å§ã€‚"
    },
    {
        "text": "æˆ‘ç°åœ¨è¿˜ä¸æƒ³è°ˆæ‹çˆ±ï¼Œæˆ‘ä»¬å…ˆä¿æŒæœ‹å‹å…³ç³»å¥½å—ï¼Ÿ",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "ä½ æ˜¯ä¸ªå¾ˆå¥½çš„äººï¼Œä½†æˆ‘ç°åœ¨æ›´éœ€è¦çš„æ˜¯æœ‹å‹è€Œä¸æ˜¯æ‹äººã€‚"
    },
    {
        "text": "æˆ‘è§‰å¾—æœ‹å‹å…³ç³»æ›´é€‚åˆæˆ‘ä»¬ï¼Œä½ è§‰å¾—å‘¢ï¼Ÿ",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "æˆ‘ä»¬å¯ä»¥å…ˆæ…¢æ…¢äº†è§£å½¼æ­¤ï¼Œä¸è¦æ€¥ç€ç¡®å®šå…³ç³»å¥½å—ï¼Ÿ"
    },
    {
        "text": "ä½ æ˜¯ä¸ªå¾ˆå¥½çš„æœ‹å‹ï¼Œæˆ‘å¸Œæœ›æˆ‘ä»¬èƒ½ä¿æŒç°åœ¨çš„å…³ç³»ã€‚",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "æˆ‘çœŸçš„å¾ˆçæƒœæˆ‘ä»¬ç°åœ¨çš„å‹è°Šï¼Œä¸æƒ³å› ä¸ºå…¶ä»–å› ç´ ç ´åå®ƒã€‚"
    },
    {
        "text": "æˆ‘è§‰å¾—æˆ‘ä»¬ç°åœ¨è¿™æ ·æŒºå¥½çš„ï¼Œå…ˆä¸è¦æ”¹å˜å¥½å—ï¼Ÿ",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "æˆ‘ä»¬å¯ä»¥ç»§ç»­åƒç°åœ¨è¿™æ ·åšæœ‹å‹ï¼Œæ…¢æ…¢äº†è§£å½¼æ­¤ã€‚"
    },
    {
        "text": "æˆ‘æš‚æ—¶è¿˜ä¸æƒ³è°ˆæ‹çˆ±ï¼Œä½†æˆ‘ä»¬è¿˜å¯ä»¥åšæœ‹å‹ã€‚",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "ä½ æ˜¯ä¸ªå¾ˆç‰¹åˆ«çš„äººï¼Œä½†æˆ‘ç°åœ¨æ›´éœ€è¦çš„æ˜¯æœ‹å‹çš„é™ªä¼´ã€‚"
    },
    {
        "text": "æˆ‘è§‰å¾—æœ‹å‹ä¹‹é—´ç›¸å¤„æ›´è½»æ¾ï¼Œæˆ‘ä»¬å…ˆä¿æŒè¿™æ ·å¥½å—ï¼Ÿ",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "æˆ‘ä»¬å¯ä»¥å…ˆåšæœ‹å‹ï¼Œç»™å½¼æ­¤ä¸€äº›æ—¶é—´å’Œç©ºé—´æ¥äº†è§£å¯¹æ–¹ã€‚"
    },
    {
        "text": "ä½ æ˜¯ä¸ªå¾ˆå¥½çš„äººï¼Œä½†æˆ‘è§‰å¾—æˆ‘ä»¬æ›´é€‚åˆåšæœ‹å‹ã€‚",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "æˆ‘çœŸçš„å¾ˆçæƒœä½ è¿™ä¸ªæœ‹å‹ï¼Œä¸å¸Œæœ›æˆ‘ä»¬çš„å…³ç³»å˜å¾—å¤æ‚ã€‚"
    },
    {
        "text": "æˆ‘è§‰å¾—æˆ‘ä»¬ç°åœ¨è¿™æ ·åšæœ‹å‹æŒºå¥½çš„ï¼Œä½ è§‰å¾—å‘¢ï¼Ÿ",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "æˆ‘ä»¬å¯ä»¥ç»§ç»­ä¿æŒæœ‹å‹å…³ç³»ï¼Œç»™å½¼æ­¤æ›´å¤šæ—¶é—´äº†è§£ã€‚"
    },
    {
        "text": "æˆ‘æš‚æ—¶è¿˜ä¸æƒ³æ”¹å˜æˆ‘ä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå…ˆåšæœ‹å‹å¥½å—ï¼Ÿ",
        "prob": 0.4, // SR: Decreased
        "rarity": "SR",
        "desc": "ä½ æ˜¯ä¸ªå¾ˆç‰¹åˆ«çš„äººï¼Œä½†æˆ‘å¸Œæœ›æˆ‘ä»¬èƒ½å…ˆä»æœ‹å‹å¼€å§‹ã€‚"
    },
    {
        "text": "å¥½å‘€å®è´ï¼Œæˆ‘ä¹Ÿå–œæ¬¢ä½ å¾ˆä¹…äº†ï¼ä½†æ˜¯æˆ‘æ›´çˆ±è«é,å¯¹ä¸èµ·äº†ï¼",
        "prob": 0.1, // SSR: Extremely Rare
        "rarity": "SSR",
        "desc": "æ²¡äººä¸çˆ±è«é,å¯¹å§ï¼Ÿ"
    }
  ];

  // â€”â€” æ¦‚ç‡ç´¯è®¡ â€”â€”
  var million = 1000000;
  var weights = []; var total = 0; var i;
  for(i=0;i<POOL.length;i++){ var w = Math.round(POOL[i].prob/100 * million); weights.push(w); total += w; }
  var cumulative = []; for(i=0;i<weights.length;i++){ cumulative.push( (cumulative.length? cumulative[cumulative.length-1] : 0) + weights[i] ); }

  // â€”â€” å…¨å±€çŠ¶æ€ â€”â€”
  var draws = []; var chat = [];

  // â€”â€” DOM refs â€”â€”
  var panes, chatEl, galleryEl, rarTbl, itmTbl, statsEl, sendBtn, send10Btn, copyBtn, resetBtn;

  function loadState(){
    try{ draws = JSON.parse(localStorage.getItem('xixi-gacha-record')||'[]'); }catch(e){ draws=[]; }
    try{ chat = JSON.parse(localStorage.getItem('xixi-gacha-chat')||'[]'); }catch(e){ chat=[]; }
  }
  function saveState(){
    localStorage.setItem('xixi-gacha-record', JSON.stringify(draws));
    localStorage.setItem('xixi-gacha-chat', JSON.stringify(chat));
  }

  function switchTab(id){
    var tabs = document.querySelectorAll('.tab');
    for(i=0;i<tabs.length;i++){ tabs[i].classList.toggle('active', tabs[i].getAttribute('data-tab')===id); }
    var keys=['chatPane','galleryPane','statsPane'];
    for(i=0;i<keys.length;i++){ panes[keys[i]].classList.toggle('hidden', keys[i]!==id); }
    if(id==='galleryPane') renderGallery();
    if(id==='statsPane') renderStatsTables();
  }

  function getUnlockedMap(){ var map = {}; for(i=0;i<draws.length;i++){ map[draws[i].index]=1; } return map; }
  function unlockedCount(){ var m=getUnlockedMap(); var c=0; for(var k in m){ if(m.hasOwnProperty(k)) c++; } return c; }

  function renderTopStats(){
    var cnt = draws.length; var ssr = 0; for(i=0;i<draws.length;i++){ if(draws[i].rarity==='SSR') ssr++; }
    statsEl.textContent = cnt + ' æŠ½ Â· SSR ' + ssr + ' Â· å®Œæˆ ' + unlockedCount() + '/' + POOL.length;
  }

  function bubble(side, html){ var d = document.createElement('div'); d.className = 'msg ' + (side==='user'?'right':'left'); d.innerHTML = html; chatEl.appendChild(d); chatEl.scrollTop = chatEl.scrollHeight; }
  function renderChat(){
    chatEl.innerHTML='';
    if(chat.length===0){ chat.push({side:'left', html:'<div>ğŸ‹ æ´»åŠ¨å¼€å¯ï¼šç‚¹å‡»ä¸‹æ–¹â€œ<b>å’±ä¿©è¯•è¯•ï¼Ÿ</b>â€æ¥æŠ½å¡</div><div class="meta">æˆªæ­¢ 2025-08-29 Â· æ¦‚ç‡è®°å½•ä¸æ”¶é›†å‡ä¿å­˜æœ¬åœ°</div>'}); }
    for(i=0;i<chat.length;i++){ bubble(chat[i].side, chat[i].html); }
  }

  function pickOne(){ var r = Math.floor(Math.random()*total); var idx=-1; for(i=0;i<cumulative.length;i++){ if(r < cumulative[i]){ idx=i; break; } } var it = POOL[idx]; return { index: idx, text: it.text, prob: it.prob, rarity: it.rarity }; }

  function confetti(){ var holder=document.getElementById('confetti'); holder.innerHTML=''; var icons=['ğŸ‰','âœ¨','ğŸ’«','â­ï¸']; for(i=0;i<80;i++){ var el=document.createElement('i'); el.textContent=icons[Math.floor(Math.random()*icons.length)]; el.style.left=(Math.random()*100)+'vw'; el.style.fontSize=(12+Math.random()*24)+'px'; el.style.animationDelay=(Math.random()*0.6)+'s'; holder.appendChild(el);} setTimeout(function(){ holder.innerHTML=''; }, 2600); }

  // â€”â€” SSR ç»“å±€åŠ¨ç”» â€”â€”
  function showEnding(){ var o=document.getElementById('ending'); var box=document.getElementById('endingHearts'); box.innerHTML=''; var emo=['ğŸ’–','ğŸ’˜','ğŸ’','âœ¨']; for(var j=0;j<36;j++){ var sp=document.createElement('i'); sp.textContent=emo[Math.floor(Math.random()*emo.length)]; sp.style.left=(Math.random()*100)+'%'; sp.style.fontSize=(14+Math.random()*28)+'px'; sp.style.animationDelay=(Math.random()*1.2)+'s'; box.appendChild(sp);} o.className='ending'; }
  function hideEnding(){ var o=document.getElementById('ending'); o.className='ending hidden'; }

  function renderGallery(){
    var un = getUnlockedMap(); galleryEl.innerHTML='';
    var wrap = document.createElement('div'); wrap.className='cardItem'; wrap.innerHTML = '<div class="badgeR">æ”¶é›†è¿›åº¦ <span id="progTxt"></span></div><div class="progress"><i id="progBar"></i></div>'; galleryEl.appendChild(wrap);
    for(i=0;i<POOL.length;i++){
      var p=POOL[i]; var card=document.createElement('div'); var got=un[i]===1; card.className='cardItem'+(got?'':' lock');
      var desc = p.desc ? p.desc : '';
      card.innerHTML = '<div class="name">'+p.text+'</div>'+
                       '<div class="desc">'+desc+'</div>'+
                       '<div class="badgeR">ç¨€æœ‰åº¦ <span class="rarity '+p.rarity+'">'+p.rarity+'</span></div>'+
                       '<div class="badgeR">æœŸæœ›ï¼š'+p.prob+'%</div>';
      galleryEl.appendChild(card);
    }
    var have = unlockedCount(); var prog = Math.round(have/POOL.length*100)+'%'; document.getElementById('progTxt').textContent = have+'/'+POOL.length+' Â· '+prog; document.getElementById('progBar').style.width = prog;
  }

  function renderStatsTables(){
    var rarities=['N','R','SR','SSR']; var rhtml='<tr><th>ç¨€æœ‰åº¦</th><th>æ¡ç›®æ•°</th><th>æœŸæœ›æ¦‚ç‡</th><th>å‘½ä¸­æ¬¡æ•°</th><th>è§‚å¯Ÿæ¦‚ç‡</th></tr>';
    for(var ri=0;ri<rarities.length;ri++){
      var r = rarities[ri]; var count=0, expect=0, hits=0; for(i=0;i<POOL.length;i++){ if(POOL[i].rarity===r){ count++; expect+=POOL[i].prob; } }
      for(i=0;i<draws.length;i++){ if(draws[i].rarity===r) hits++; }
      var rate = draws.length? (hits/draws.length*100):0; rhtml += '<tr><td>'+r+'</td><td>'+count+'</td><td>'+expect.toFixed(2)+'%</td><td>'+hits+'</td><td>'+rate.toFixed(2)+'%</td></tr>';
    }
    rarTbl.innerHTML = rhtml + (draws.length?'<tr><td colspan="5" style="color:var(--muted)">æ€»æŠ½æ•°ï¼š'+draws.length+'</td></tr>':'');

    var map={}; for(i=0;i<draws.length;i++){ map[draws[i].index]=(map[draws[i].index]||0)+1; }
    var ihtml='<tr><th>#</th><th>ç»“æœ</th><th>ç¨€æœ‰åº¦</th><th>æœŸæœ›æ¦‚ç‡</th><th>å‘½ä¸­æ¬¡æ•°</th><th>è§‚å¯Ÿæ¦‚ç‡</th></tr>';
    for(i=0;i<POOL.length;i++){ var p=POOL[i]; var hit = map[i]||0; var rate2 = draws.length? (hit/draws.length*100):0; ihtml += '<tr><td>'+(i+1)+'</td><td>'+p.text+'</td><td><span class="rarity '+p.rarity+'">'+p.rarity+'</span></td><td>'+p.prob+'%</td><td>'+hit+'</td><td>'+rate2.toFixed(2)+'%</td></tr>'; }
    itmTbl.innerHTML = ihtml;
  }

  function init(){
    panes={ chatPane: document.getElementById('chatPane'), galleryPane: document.getElementById('galleryPane'), statsPane: document.getElementById('statsPane') };
    chatEl = panes.chatPane; galleryEl=document.getElementById('gallery'); rarTbl=document.getElementById('rarTbl'); itmTbl=document.getElementById('itmTbl'); statsEl=document.getElementById('stats');
    sendBtn=document.getElementById('sendBtn'); send10Btn=document.getElementById('send10'); copyBtn=document.getElementById('copy'); resetBtn=document.getElementById('reset');

    loadState();

    var tabs = document.querySelectorAll('.tab'); for(i=0;i<tabs.length;i++){ (function(btn){ btn.addEventListener('click', function(){ switchTab(btn.getAttribute('data-tab')); }); })(tabs[i]); }

    renderChat(); renderTopStats(); renderGallery(); renderStatsTables();

    var busy=false; var cont=document.getElementById('continueBtn'); if(cont){ cont.addEventListener('click', function(){ hideEnding(); }); }

    if(sendBtn){
      sendBtn.addEventListener('click', function(){
        if(busy) return; busy=true; sendBtn.disabled=true; if(send10Btn) send10Btn.disabled=true;
        var userHtml = '<div>æˆ‘ï¼š<b>å’±ä¿©è¯•è¯•ï¼Ÿ</b></div>'; chat.push({side:'user', html:userHtml}); bubble('user', userHtml);
        setTimeout(function(){ var item=pickOne(); var tag='<span class="rarity '+item.rarity+'">'+item.rarity+'</span>'; var botHtml = '<div>'+item.text+' '+tag+'</div>'; chat.push({side:'left', html:botHtml}); bubble('left', botHtml); draws.push({ id:draws.length+1, index:item.index, text:item.text, rarity:item.rarity }); if(draws.length>2000) draws=draws.slice(-2000); saveState(); renderTopStats(); if(item.rarity==='SSR'){ confetti(); showEnding(); } sendBtn.disabled=false; if(send10Btn) send10Btn.disabled=false; busy=false; }, 360);
      });
    }

    // åè¿æŠ½äº‹ä»¶
    if(send10Btn){
      send10Btn.addEventListener('click', function(){
        if(busy) return; busy=true; if(sendBtn) sendBtn.disabled=true; send10Btn.disabled=true;
        var userHtml = '<div>æˆ‘ï¼š<b>åè¿æŠ½ï¼ˆÃ—10ï¼‰</b></div>'; chat.push({side:'user', html:userHtml}); bubble('user', userHtml);
        setTimeout(function(){
          var anySSR=false; var list='';
          for(var k=0;k<10;k++){
            var it=pickOne();
            var tag='<span class="rarity '+it.rarity+'">'+it.rarity+'</span>';
            list += '<div>â€¢ '+it.text+' '+tag+'</div>';
            draws.push({ id:draws.length+1, index:it.index, text:it.text, rarity:it.rarity });
            if(it.rarity==='SSR') anySSR=true;
          }
          saveState(); renderTopStats(); bubble('left','<div>åè¿ç»“æœï¼š</div>'+list);
          if(anySSR){ confetti(); showEnding(); }
          if(sendBtn) sendBtn.disabled=false; send10Btn.disabled=false; busy=false;
        }, 360);
      });
    }

    if(copyBtn){
      copyBtn.addEventListener('click', function(){
        var last10='';
        var start = Math.max(0, draws.length-10);
        for(i=start;i<draws.length;i++){
          last10 += '['+draws[i].rarity+'] '+draws[i].text + (i<draws.length-1 ? '\n' : '');
        }
        var text = 'æœ€è¿‘ 10 æ¬¡å›å¤ï¼š\n' + (last10 || 'ï¼ˆæš‚æ— è®°å½•ï¼‰');
        if(navigator.clipboard && navigator.clipboard.writeText){
          navigator.clipboard.writeText(text).then(function(){
            bubble('left','<div>âœ… å·²å¤åˆ¶æœ€è¿‘ 10 æ¡ç»“æœ</div>');
          }, function(){
            bubble('left','<div>â—ï¸ å¤åˆ¶å¤±è´¥ï¼ˆæƒé™ï¼‰ï¼Œå·²è¾“å‡ºåˆ°æ§åˆ¶å°</div>');
            console.log(text);
          });
        } else {
          try{
            var ta=document.createElement('textarea');
            ta.value=text; document.body.appendChild(ta); ta.select();
            document.execCommand('copy'); document.body.removeChild(ta);
            bubble('left','<div>âœ… å·²å¤åˆ¶æœ€è¿‘ 10 æ¡ç»“æœ</div>');
          } catch(e){
            bubble('left','<div>â—ï¸ å¤åˆ¶å¤±è´¥ï¼ˆç¯å¢ƒå—é™ï¼‰ï¼Œå·²è¾“å‡ºåˆ°æ§åˆ¶å°</div>');
            console.log(text);
          }
        }
      });
    }

    if(resetBtn){
      resetBtn.addEventListener('click', function(){
        if(!confirm('æ¸…ç©ºæ‰€æœ‰å¯¹è¯ä¸è®°å½•ï¼Ÿ')) return;
        draws=[]; chat=[]; saveState(); renderChat(); renderTopStats(); renderGallery(); renderStatsTables();
        bubble('left','<div>è®°å½•å·²æ¸…ç©ºã€‚ç‚¹å‡»â€œ<b>å’±ä¿©è¯•è¯•ï¼Ÿ</b>â€é‡æ–°å¼€å§‹ã€‚</div>');
      });
    }
  }

  if(document.readyState==='loading'){ window.addEventListener('DOMContentLoaded', init); } else { init(); }
})();
</script>
</body>
</html>